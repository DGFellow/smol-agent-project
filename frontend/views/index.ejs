<%- include('header') %>

<main class="container">
    <!-- Sidebar Toggle Button (always visible) -->
    <button id="sidebar-toggle" class="sidebar-toggle" aria-label="Toggle sidebar">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
            <path d="M3 12h18M3 6h18M3 18h18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
    </button>

    <!-- Sidebar -->
    <aside id="sidebar" class="sidebar">
        <div class="sidebar-header">
            <h2>ðŸ’¬ Conversations</h2>
            <button id="sidebar-close" class="icon-btn" aria-label="Close sidebar">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
                    <path d="M6 6l12 12M18 6L6 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
            </button>
        </div>

        <div class="sidebar-actions">
            <button id="new-chat-btn" class="btn btn-primary new-chat-btn">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                    <path d="M12 5v14M5 12h14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
                New Chat
            </button>
        </div>

        <div class="sidebar-content">
            <div id="conversation-list" class="conversation-list">
                <!-- Conversations will be loaded here -->
            </div>
        </div>

        <div class="sidebar-footer">
            <button id="clear-all-btn" class="btn btn-secondary btn-sm">
                Clear All History
            </button>
        </div>
    </aside>

    <!-- Sidebar Overlay (for mobile) -->
    <div id="sidebar-overlay" class="sidebar-overlay"></div>

    <!-- Main Chat Interface -->
    <div class="chat-interface">
        <div class="agent-indicator">
            <!-- Single status indicator on the left -->
            <div class="status-chip">
                <span id="status-indicator" class="status-dot"></span>
                <span id="status-text">Ready</span>
            </div>
            
            <!-- Empty space for symmetry -->
            <span></span>
        </div>

        <div id="chat-messages" class="messages"></div>

        <div class="input-area">
            <div class="composer">
                <button type="button" class="icon-btn attach-btn" aria-label="Attach" title="Attach files (coming soon)">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                        <path d="M16.5 6.5l-7.78 7.78a3 3 0 104.24 4.24L19 12.5" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M14 9l-6.36 6.36a1.5 1.5 0 102.12 2.12L17 10.24" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>

                <textarea
                    id="message-input"
                    placeholder="Ask anythingâ€¦"
                    rows="1"
                ></textarea>

                <div class="button-group composer-actions">
                    <button type="button" id="clear-btn" class="icon-btn" aria-label="Clear" title="Clear conversation">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                            <path d="M6 6l12 12M18 6L6 18" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
                        </svg>
                    </button>

                    <button type="button" id="send-btn" class="send-btn btn-primary" aria-label="Send">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                            <path d="M4 12l16-8-5.5 8L20 20 4 12z" stroke="currentColor" stroke-width="1.4" stroke-linejoin="round"/>
                        </svg>
                        <span class="btn-label">Send</span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</main>

<%- include('footer') %>